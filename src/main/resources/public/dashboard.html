<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
</head>
<body>
    <h1>User Dashboard</h1>
    <div id="balance"></div>
    <h2>Transactions</h2>
    <ul id="transactions"></ul>

    <script>
        // Get userId from query param (?id=...)
        const params = new URLSearchParams(window.location.search);
        const userId = params.get("id");

        if (!userId) {
            document.body.innerHTML = "<p>No user logged in.</p>";
        } else {
            // Fetch balance
            fetch(`/users/${userId}/balance`)
                .then(res => res.json())
                .then(data => {
                    document.getElementById("balance").innerText =
                        "Net Balance: " + data.netBalance;
                });

            // Fetch transactions
            fetch(`/users/${userId}/transactions`)
                .then(res => res.json())
                .then(transactions => {
                    const list = document.getElementById("transactions");
                    transactions.forEach(tx => {
                        const li = document.createElement("li");
                        li.textContent = `${tx.date} - ${tx.amount} (${tx.transactionType})`;
                        list.appendChild(li);
                    });
                });
        }
    </script>
</body>
</html>
